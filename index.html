<!DOCTYPE html>
<html lang="pt-br" data-app="ARKHOS_UI" data-ui-contract="CONTRACT_API_V0" data-ui-mode="LOCAL_SIMULADOR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ARKHOS | Esta√ß√£o de Intelig√™ncia Jur√≠dica</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- =========================
       HEADER (CABINE + TELEMETRIA)
       ========================= -->
  <header class="no-print" id="app-header">
    <div class="header-container">

      <!-- Marca central (s√≠mbolos + logo) -->
      <div class="logo-area" aria-label="Marca ARKHOS">
        <span class="symbol" aria-hidden="true">‚ôà</span>
        <h1 id="app-title">ARKHOS</h1>
        <span class="symbol" aria-hidden="true">‚öñÔ∏è</span>
        <small class="subtitle" id="subtitle">ESTA√á√ÉO DE CONFORMIDADE E MINUTAGEM T√âCNICA</small>
      </div>

      <!-- Direita: Status + Idioma -->
      <div class="header-right">

        <!-- Telemetria do motor (porta aberta para REMOTO) -->
        <div id="vigilia-status" class="motor-status" data-state="CONNECTING" data-latency-ms="" data-engine-version="">
          <div class="pulse-icon" aria-hidden="true"></div>

          <div class="motor-lines">
            <div class="motor-line">
              <span class="motor-label">MOTOR:</span>
              <b id="status-core" class="status-on">CONECTANDO</b>
            </div>

            <div class="motor-badges" aria-label="Badges de opera√ß√£o">
              <span id="badge-runtime" class="badge badge-runtime" data-runtime="LOCAL_SIMULADOR">LOCAL SIMULADOR</span>
              <span id="badge-health" class="badge badge-health" data-health="CONNECTING">CONNECTING</span>
              <span id="badge-latency" class="badge badge-latency" hidden>-- ms</span>
              <span id="badge-engine" class="badge badge-engine" hidden>ENGINE --</span>
            </div>
          </div>
        </div>

        <!-- Seletor de idioma -->
        <div class="lang-switcher" aria-label="Selecionar idioma">
          <button onclick="mudarIdioma('pt')" id="btn-lang-pt" class="lang-btn active" type="button">PT</button>
          <span class="divider" aria-hidden="true">|</span>
          <button onclick="mudarIdioma('en')" id="btn-lang-en" class="lang-btn" type="button">EN</button>
        </div>

      </div>
    </div>
  </header>

  <!-- =========================
       MAIN (BANCADA / WORKBENCH)
       ========================= -->
  <main class="bancada-container no-print" id="app-main">

    <!-- =========================
         COLUNA ESQUERDA: COMANDOS
         ========================= -->
    <section class="col-comando" aria-label="Comandos do sistema">

      <!-- Seletor de modo (dualidade) -->
      <div class="seletor-pista" role="tablist" aria-label="Alternar modo de trabalho">
        <button id="btn-pista-direta" class="btn-pista ativo" type="button" role="tab" aria-selected="true" aria-controls="painel-direto">
          MODO PROFISSIONAL (MINUTA)
        </button>
        <button id="btn-pista-guiada" class="btn-pista" type="button" role="tab" aria-selected="false" aria-controls="painel-chat">
          ASSISTENTE JUR√çDICO (CHAT)
        </button>
      </div>

      <!-- =========================
           PAINEL 1: MODO DIRETO (MINUTA)
           ========================= -->
      <div id="painel-direto" class="panel-mode" data-mode="direto">

        <div class="card-comando">
          <label for="area-direito" id="label-area">COMPET√äNCIA / √ÅREA DE ATUA√á√ÉO</label>
          <select id="area-direito" class="select-tecnico">
            <option value="civil">Direito Civil (Contratos, Fam√≠lia, Danos)</option>
            <option value="penal">Direito Criminal (Defesa, Inqu√©rito, Execu√ß√£o)</option>
            <option value="trabalhista">Direito Trabalhista (Reclamat√≥ria, Defesa)</option>
            <option value="consumidor">Direito do Consumidor (Indeniza√ß√µes, Juizado)</option>
            <option value="tributario">Direito Tribut√°rio (Defesa Fiscal, Recupera√ß√£o)</option>
            <option value="previdenciario">Direito Previdenci√°rio (Concess√£o, Revis√£o)</option>
            <option value="administrativo">Direito Administrativo (Licita√ß√µes, Servidores)</option>
          </select>

          <label for="cmd-input" id="label-input">INSTRU√á√ÉO T√âCNICA DA MINUTA</label>
          <textarea id="cmd-input" placeholder="Descreva os fatos ou a ordem jur√≠dica de acordo com a √°rea selecionada..."></textarea>

          <!-- Acervo / Upload -->
          <div class="upload-area" aria-label="Acervo probat√≥rio">
            <label for="file-soberano" class="btn-anexo">
              <span id="label-anexo">üìé APORTAR LASTRO DOCUMENTAL (ACERVO)</span>
              <input type="file" id="file-soberano" multiple style="display:none;">
            </label>

            <div id="file-display-area" class="lista-arquivos" aria-live="polite">
              <p class="txt-vazio">Acervo probat√≥rio vazio. Aguardando documentos...</p>
            </div>
          </div>
        </div>

        <!-- Monitor de integridade -->
        <div class="monitor-integridade" aria-label="An√°lise de conformidade processual">
          <h3>AN√ÅLISE DE CONFORMIDADE PROCESSUAL</h3>

          <div class="grid-eixos">
            <div class="eixo" id="e-metal">
              <label>L√ìGICA (Estrutura)</label>
              <div class="bar"><div class="fill" style="width: 0%;"></div></div>
            </div>

            <div class="eixo" id="e-estado">
              <label>PROVAS (Acervo)</label>
              <div class="bar"><div class="fill" style="width: 0%;"></div></div>
            </div>

            <div class="eixo" id="e-legiao">
              <label>CONTEXTO (Jurisprud√™ncia)</label>
              <div class="bar"><div class="fill" style="width: 0%;"></div></div>
            </div>

            <div class="eixo" id="e-logos">
              <label>DIREITO (Fundamenta√ß√£o)</label>
              <div class="bar"><div class="fill" style="width: 0%;"></div></div>
            </div>
          </div>

          <div class="selos-validacao" aria-label="Selos de valida√ß√£o">
            <span id="selo-cert" class="selo selo-off">CERT: AGUARDANDO</span>
            <span id="selo-audit" class="selo selo-off">AUTENTICIDADE: PENDENTE</span>
          </div>
        </div>

        <button id="btn-executar" class="btn-main" disabled type="button">
          GERAR MINUTA E PROTOCOLAR
        </button>

      </div>

      <!-- =========================
           PAINEL 2: ASSISTENTE (CHAT) ‚Äî VOL√ÅTIL
           ========================= -->
      <div id="painel-chat" class="panel-mode" data-mode="assistente" hidden>

        <div class="card-chat" aria-label="Assistente jur√≠dico">
          <div class="chat-top">
            <div class="chat-title">
              <strong id="chat-title">ASSISTENTE JUR√çDICO</strong>
              <span class="chat-badge" id="chat-volatile-badge" title="Sess√£o vol√°til por padr√£o">
                Sess√£o vol√°til (s√≥ registra ao Arquivar/Exportar/Gerar)
              </span>
            </div>

            <!-- Portas de inten√ß√£o (atalhos) -->
            <div class="chat-actions" id="chat-actions" aria-label="A√ß√µes r√°pidas do assistente">
              <button type="button" class="chip-action" data-intent="peticao">Pedir Peti√ß√£o</button>
              <button type="button" class="chip-action" data-intent="resumo">Gerar Resumo</button>
              <button type="button" class="chip-action" data-intent="revisao">Revisar Texto</button>
              <button type="button" class="chip-action" data-intent="relatorio">Relat√≥rio T√©cnico</button>
            </div>
          </div>

          <!-- Container de mensagens -->
          <div id="chat-messages" class="chat-messages" aria-live="polite" aria-label="Mensagens do chat">
            <!-- Mensagens ser√£o inseridas aqui pelo script -->
            <div class="chat-empty">
              <p>Digite sua consulta. O assistente vai conduzir as perguntas necess√°rias e apontar o que falta para ‚Äúpassar‚Äù no fail-closed.</p>
            </div>
          </div>

          <!-- Input sticky (estrutura pronta; CSS define comportamento) -->
          <div class="chat-input-wrap" aria-label="Enviar mensagem">
            <input id="chat-input" class="chat-input" type="text" placeholder="Escreva sua consulta jur√≠dica..." autocomplete="off" />
            <button id="chat-send" class="chat-send" type="button">Enviar</button>
          </div>

          <!-- Acervo no chat (mesma tomada; reutiliza o input existente) -->
          <div class="chat-acervo-hint">
            <small>Voc√™ pode anexar documentos pelo mesmo Acervo do sistema (lastro probat√≥rio).</small>
          </div>
        </div>

      </div>

      <!-- =========================
           PORTA UNIVERSAL (TOMADA-ESTRELA)
           Metadados que permitem o motor acoplar sem quebrar a UI
           ========================= -->
      <section class="portas-motor" aria-label="Portas do motor (metadados)" hidden>
        <div id="motor-port" data-port="STAR_SOCKET_V0"
             data-health-endpoint="/health"
             data-audit-endpoint="/audit"
             data-draft-endpoint="/draft"
             data-chat-endpoint="/chat"
             data-archive-endpoint="/archive"
             data-auth="GATEWAY_TOKEN"
             data-runtime="LOCAL_SIMULADOR">
        </div>

        <!-- Contrato m√≠nimo embutido (documental; o script pode ler se quiser) -->
        <script id="contract-api-v0" type="application/json">
{
  "name": "CONTRATO_API_V0",
  "payload": {
    "case_text": "string",
    "attachments": [{"name":"string","hash":"string","ref":"string"}],
    "case_meta": {"area":"string","tribunal":"string","fase":"string","urgencia":"string"},
    "objective": "audit|draft|chat|extract",
    "mode": "simulacao|analise|rascunho",
    "prefs": {"tom":"string","nivel":"string","formato":"html|text"}
  },
  "response": {
    "status": "OK|REJECT|NEED_MORE_INFO|ERROR",
    "cert": {"score":"number","selos":["string"],"integridade":"string"},
    "evidence": [{"id":"string","hash":"string","trecho":"string"}],
    "causal_chain": [{"event":"string","decision":"string","ts":"string"}],
    "result": {"audit":{}, "draft":{}, "chat":{}},
    "warnings": ["string"],
    "fail_closed_reason": "string"
  }
}
        </script>
      </section>

    </section>

    <!-- =========================
         COLUNA DIREITA: RESULTADOS
         ========================= -->
    <section class="col-resultado" aria-label="Resultados e documento">

      <!-- M√©tricas -->
      <div class="dashboard-lcu" aria-label="M√©tricas principais">
        <div class="metric-card" id="card-metrica-1">
          <small id="label-metrica-1">M√âTRICA DE VIABILIDADE</small>
          <strong id="val-expectativa">--</strong>
        </div>
        <div class="metric-card warning" id="card-metrica-2">
          <small id="label-metrica-2">MARGEM DE RISCO T√âCNICO</small>
          <strong id="val-erro">--</strong>
        </div>
      </div>

      <!-- Canvas do documento -->
      <div id="output-canvas" class="canvas-documento" aria-label="Pr√©-visualiza√ß√£o do documento">
        <div class="placeholder-msg">
          <span class="icon" aria-hidden="true">üìÑ</span>
          <p id="txt-placeholder">Aguardando instru√ß√£o t√©cnica e acervo probat√≥rio para compilar o documento.</p>
        </div>
      </div>

      <!-- Painel de rastreabilidade (CERT / Evid√™ncias / Ledger) -->
      <details class="painel-rastreio" id="painel-rastreio">
        <summary>
          <span>Rastreabilidade & CERT (Governan√ßa)</span>
          <span class="hint">‚Äî selos, evid√™ncias, protocolo</span>
        </summary>

        <div class="rastreio-grid">

          <div class="rastreio-card">
            <h4>CERT</h4>
            <div id="cert-resumo" class="rastreio-body">
              <p class="muted">Aguardando resposta do motor para emitir CERT e selos.</p>
            </div>
          </div>

          <div class="rastreio-card">
            <h4>PROTOCOLO / LEDGER</h4>
            <div id="ledger-resumo" class="rastreio-body">
              <p class="muted">Nenhum protocolo registrado nesta sess√£o.</p>
            </div>
          </div>

          <div class="rastreio-card rastreio-card-wide">
            <h4>EVID√äNCIAS / BASE USADA</h4>
            <div id="evidencias-resumo" class="rastreio-body">
              <p class="muted">Sem evid√™ncias anexadas ao resultado (ainda).</p>
            </div>
          </div>

        </div>
      </details>

      <!-- A√ß√µes finais -->
      <div class="acoes-finais" aria-label="A√ß√µes finais">
        <button id="btn-exportar" class="btn-secundario" type="button">üì• EXPORTAR DOCUMENTO (PDF LIMPO)</button>
        <button id="btn-salvar" class="btn-secundario" type="button">üíæ ARQUIVAR NO SISTEMA</button>
      </div>

    </section>

  </main>

  <!-- =========================
       IMPRESS√ÉO ISOLADA (C05)
       ========================= -->
  <div id="secao-impressao-isolada" class="only-print"></div>

  <script src="script.js"></script>
</body>
</html>
```Ó®Å0Ó®Ç
