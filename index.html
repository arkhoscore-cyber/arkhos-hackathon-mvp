<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARKHOS v3.5 — Auditoria Jurídica</title>
    <style>
        :root {
            --bg: #0a0a0a;
            --gold: #D4AF37;
            --blue: #00d4ff;
            --text: #e0e0e0;
            --card: #151515;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            overflow-x: hidden;
        }

        /* UI SOBERANA (C01) */
        header { border-bottom: 2px solid var(--gold); padding: 20px; text-align: center; }
        h1 { color: var(--gold); margin: 0; letter-spacing: 2px; }

        .container { padding: 20px; max-width: 1200px; margin: auto; }

        /* QUADRILÁTERO (C02) */
        .quadrilatero {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .eixo {
            background: var(--card);
            border-left: 4px solid var(--blue);
            padding: 15px;
            border-radius: 4px;
        }
        .barra-container {
            background: #333;
            height: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .barra {
            height: 100%;
            background: var(--blue);
            width: 0%;
            transition: width 0.5s ease;
        }

        .controles {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        button {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 10px 20px;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
        }

        button:hover { background: var(--gold); color: black; }

        /* MENTE SOBERANA */
        #lista-arquivos { font-size: 0.9em; color: var(--blue); margin-top: 10px; }

        /* PDF LIMPO (C05) */
        #relatorio-print { display: none; color: black; background: white; padding: 40px; }

        @media print {
            body { background: white !important; }
            .no-print { display: none !important; }
            #relatorio-print { display: block !important; width: 100%; }
            * { -webkit-print-color-adjust: exact; }
        }
    </style>
</head>
<body>

<div class="no-print">
    <header>
        <h1>ARKHOS v3.5</h1>
        <small>SCANNER DE VIABILIDADE JURÍDICA</small>
    </header>

    <div class="container">
        <div class="controles">
            <input type="file" id="inputArquivos" multiple style="display:none" onchange="acumularArquivos(this)">
            <button onclick="document.getElementById('inputArquivos').click()">+ ANEXAR (MENTE SOBERANA)</button>
            <button onclick="executarAuditoria()">EXECUTAR AUDITORIA</button>
            <button onclick="exportarDossie()">EXPORTAR DOSSIÊ (PDF)</button>
            <button onclick="switchMode()">ALTERNAR MODO</button>
        </div>

        <div id="lista-arquivos">Arquivos na Mente: 0</div>

        <div class="quadrilatero">
            <div class="eixo">METAL <div class="barra-container"><div id="bar-metal" class="barra"></div></div></div>
            <div class="eixo">ESTADO <div class="barra-container"><div id="bar-estado" class="barra"></div></div></div>
            <div class="eixo">LEGIÃO <div class="barra-container"><div id="bar-legiao" class="barra"></div></div></div>
            <div class="eixo">LOGOS <div class="barra-container"><div id="bar-logos" class="barra"></div></div></div>
        </div>

        <div id="status-auditoria" style="color: var(--gold); font-family: monospace;">Aguardando processamento...</div>
    </div>
</div>

<div id="relatorio-print">
    <h1 style="border-bottom: 2px solid #000;">Dossiê de Auditoria Arkhos</h1>
    <div id="conteudo-dossie">
        </div>
</div>

<script>
    // C03: LISTA MENTE SOBERANA
    let listaMenteSoberana = [];
    let currentMode = 'Pista Rápida';

    function acumularArquivos(input) {
        for (let file of input.files) {
            listaMenteSoberana.push(file);
        }
        document.getElementById('lista-arquivos').innerText = `Arquivos na Mente: ${listaMenteSoberana.length} (${listaMenteSoberana.map(f => f.name).join(', ')})`;
    }

    function switchMode() {
        currentMode = (currentMode === 'Pista Rápida') ? 'Assistente Gênesis' : 'Pista Rápida';
        alert("Modo alterado para: " + currentMode);
    }

    function executarAuditoria() {
        if(listaMenteSoberana.length === 0) {
            alert("Mente Soberana vazia. Anexe arquivos primeiro.");
            return;
        }

        // C04/C1: Score Determinístico
        const score = Math.min(100, listaMenteSoberana.length * 25);
        
        document.getElementById('bar-metal').style.width = score + '%';
        document.getElementById('bar-estado').style.width = (score * 0.8) + '%';
        document.getElementById('bar-legiao').style.width = (score * 0.6) + '%';
        document.getElementById('bar-logos').style.width = (score * 0.9) + '%';

        document.getElementById('status-auditoria').innerText = `Auditoria Concluída: Score ${score}/100`;

        // Preparar Relatório para PDF
        document.getElementById('conteudo-dossie').innerHTML = `
            <h3>Resultado da Análise</h3>
            <p><strong>Modo:</strong> ${currentMode}</p>
            <p><strong>Total de Arquivos:</strong> ${listaMenteSoberana.length}</p>
            <p><strong>Score Global:</strong> ${score}</p>
            <hr>
            <p>Relatório gerado em: ${new Date().toLocaleString()}</p>
        `;
    }

    function exportarDossie() {
        if(document.getElementById('conteudo-dossie').innerHTML === "") {
            alert("Execute a auditoria antes de exportar.");
            return;
        }
        window.print();
    }
</script>

</body>
</html>
