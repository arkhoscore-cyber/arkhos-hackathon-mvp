<!doctype html>
<html lang="pt-br" data-app="ARKHOS_UI" data-ui-contract="CONTRACT_API_V0" data-ui-mode="LOCAL_SIMULADOR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARKHOS | Esta√ß√£o de Intelig√™ncia Jur√≠dica</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <noscript>
    <div style="padding:12px;background:#111;color:#fff;border-bottom:1px solid #333;font-family:system-ui;">
      Este sistema precisa de JavaScript para operar.
    </div>
  </noscript>

  <!-- =========================
       HEADER (Marca + Idioma + A√ß√µes √∫teis)
       ========================= -->
  <header class="no-print" id="app-header">
    <div class="header-container">

      <div class="logo-area" aria-label="Marca ARKHOS">
        <span class="symbol" aria-hidden="true">‚ôà</span>
        <h1 id="app-title">ARKHOS</h1>
        <span class="symbol" aria-hidden="true">‚öñÔ∏è</span>
        <small class="subtitle" id="subtitle">ESTA√á√ÉO DE INTELIG√äNCIA JUR√çDICA</small>
      </div>

      <div class="header-right">

        <!-- Header limpo: status simples + 1 a√ß√£o √∫til -->
        <div class="top-actions" aria-label="A√ß√µes do topo">
          <span id="status-core" class="badge badge-health" data-health="OPERATIONAL">OPERACIONAL</span>
          <button id="btn-top-ajuda" class="btn-top" type="button">AJUDA</button>
          <button id="btn-top-config" class="btn-top" type="button">CONFIG</button>
        </div>

        <div class="lang-switcher" aria-label="Selecionar idioma">
          <button id="btn-lang-pt" class="lang-btn active" type="button" data-lang="pt" aria-pressed="true">PT</button>
          <span class="divider" aria-hidden="true">|</span>
          <button id="btn-lang-en" class="lang-btn" type="button" data-lang="en" aria-pressed="false">EN</button>
        </div>

      </div>
    </div>
  </header>

  <!-- =========================
       MAIN (Telas: PRO vs CHAT)
       ========================= -->
  <main class="bancada-container no-print" id="app-main">

    <!-- =========================
         COLUNA ESQUERDA: COMANDOS
         ========================= -->
    <section class="col-comando" aria-label="Comandos do sistema">

      <!-- Tabs / troca de tela -->
      <div class="seletor-pista" role="tablist" aria-label="Alternar modo de trabalho">
        <button
          id="btn-pista-direta"
          class="btn-pista ativo"
          type="button"
          role="tab"
          aria-selected="true"
          aria-controls="tela-pro"
          data-target="#tela-pro">
          MODO PROFISSIONAL (MINUTA)
        </button>

        <button
          id="btn-pista-guiada"
          class="btn-pista"
          type="button"
          role="tab"
          aria-selected="false"
          aria-controls="tela-chat"
          data-target="#tela-chat">
          ASSISTENTE JUR√çDICO (CHAT)
        </button>
      </div>

      <!-- =========================
           TELA 1: PRO (MINUTA)
           ========================= -->
      <section id="tela-pro" class="tela" role="tabpanel" aria-labelledby="btn-pista-direta">

        <div class="panel-mode" data-mode="direto" id="painel-direto">

          <div class="card-comando">
            <label for="area-direito" id="label-area">COMPET√äNCIA / √ÅREA DE ATUA√á√ÉO</label>
            <select id="area-direito" class="select-tecnico">
              <option value="civil">Direito Civil (Contratos, Fam√≠lia, Danos)</option>
              <option value="penal">Direito Criminal (Defesa, Inqu√©rito, Execu√ß√£o)</option>
              <option value="trabalhista">Direito Trabalhista (Reclamat√≥ria, Defesa)</option>
              <option value="consumidor">Direito do Consumidor (Indeniza√ß√µes, Juizado)</option>
              <option value="tributario">Direito Tribut√°rio (Defesa Fiscal, Recupera√ß√£o)</option>
              <option value="previdenciario">Direito Previdenci√°rio (Concess√£o, Revis√£o)</option>
              <option value="administrativo">Direito Administrativo (Licita√ß√µes, Servidores)</option>
            </select>

            <label for="cmd-input" id="label-input">INSTRU√á√ÉO T√âCNICA DA MINUTA</label>
            <textarea id="cmd-input" placeholder="Descreva os fatos ou a ordem jur√≠dica de acordo com a √°rea selecionada..."></textarea>

            <!-- Acervo / Upload -->
            <div class="upload-area" aria-label="Acervo probat√≥rio">
              <label for="file-soberano" class="btn-anexo" role="button" tabindex="0">
                <span id="label-anexo">üìé APORTAR LASTRO DOCUMENTAL (ACERVO)</span>
              </label>
              <input type="file" id="file-soberano" multiple />

              <div id="file-display-area" class="lista-arquivos" aria-live="polite">
                <p class="txt-vazio">Acervo probat√≥rio vazio. Aguardando documentos...</p>

                <!-- Template (JS vai clonar) -->
                <template id="tpl-file-item">
                  <div class="file-item">
                    <span class="file-name"></span>
                    <button type="button" class="file-remove" data-remove-index="" aria-label="Remover arquivo">‚úñ</button>
                  </div>
                </template>
              </div>
            </div>
          </div>

          <!-- Auditoria / Conformidade -->
          <section class="monitor-integridade" aria-label="An√°lise de conformidade processual">
            <h3 id="titulo-analise">AN√ÅLISE DE CONFORMIDADE PROCESSUAL</h3>

            <div class="grid-eixos">
              <div class="eixo" id="e-metal">
                <label id="lbl-e-metal">L√ìGICA (Estrutura)</label>
                <div class="bar"><div class="fill" style="width:0%"></div></div>
              </div>

              <div class="eixo" id="e-estado">
                <label id="lbl-e-estado">PROVAS (Acervo)</label>
                <div class="bar"><div class="fill" style="width:0%"></div></div>
              </div>

              <div class="eixo" id="e-legiao">
                <label id="lbl-e-legiao">CONTEXTO (Jurisprud√™ncia)</label>
                <div class="bar"><div class="fill" style="width:0%"></div></div>
              </div>

              <div class="eixo" id="e-logos">
                <label id="lbl-e-logos">DIREITO (Fundamenta√ß√£o)</label>
                <div class="bar"><div class="fill" style="width:0%"></div></div>
              </div>
            </div>

            <div class="selos-validacao" aria-label="Selos de valida√ß√£o">
              <span id="selo-cert" class="selo selo-off">CERT: AGUARDANDO</span>
              <span id="selo-audit" class="selo selo-off">AUTENTICIDADE: PENDENTE</span>
            </div>
          </section>

          <button id="btn-executar" class="btn-main" type="button" disabled>
            GERAR MINUTA E PROTOCOLAR
          </button>

        </div>
      </section>

      <!-- =========================
           TELA 2: CHAT (SEPARADA)
           ========================= -->
      <section id="tela-chat" class="tela" role="tabpanel" aria-labelledby="btn-pista-guiada" hidden>

        <div class="panel-mode" data-mode="assistente" id="painel-chat">

          <div class="card-chat" aria-label="Assistente jur√≠dico">
            <div class="chat-top">
              <div class="chat-title">
                <strong id="chat-title">ASSISTENTE JUR√çDICO</strong>
                <span class="chat-badge" id="chat-volatile-badge" title="Sess√£o vol√°til por padr√£o">
                  Sess√£o vol√°til (s√≥ registra ao Arquivar/Exportar/Gerar)
                </span>
              </div>

              <div class="chat-actions" id="chat-actions" aria-label="A√ß√µes r√°pidas do assistente">
                <button type="button" class="chip-action" data-intent="peticao">Pedir Peti√ß√£o</button>
                <button type="button" class="chip-action" data-intent="resumo">Gerar Resumo</button>
                <button type="button" class="chip-action" data-intent="revisao">Revisar Texto</button>
                <button type="button" class="chip-action" data-intent="relatorio">Relat√≥rio T√©cnico</button>
              </div>
            </div>

            <div id="chat-messages" class="chat-messages" aria-live="polite" aria-label="Mensagens do chat">
              <div class="chat-empty">
                <p>Digite sua consulta. O assistente vai conduzir as perguntas necess√°rias e apontar o que falta para ‚Äúpassar‚Äù no fail-closed.</p>
              </div>
            </div>

            <div class="chat-input-wrap" aria-label="Enviar mensagem">
              <input id="chat-input" class="chat-input" type="text" placeholder="Escreva sua consulta jur√≠dica..." autocomplete="off" />
              <button id="chat-send" class="chat-send" type="button">Enviar</button>
            </div>

            <div class="chat-acervo-hint">
              <small>Voc√™ pode anexar documentos pelo mesmo Acervo do sistema (lastro probat√≥rio).</small>
            </div>
          </div>

        </div>
      </section>

      <!-- =========================
           STAR SOCKET (PORTA UNIVERSAL)
           ========================= -->
      <section class="portas-motor" aria-label="Portas do motor (metadados)" hidden>
        <div
          id="motor-port"
          data-port="STAR_SOCKET_V0"
          data-health-endpoint="/health"
          data-audit-endpoint="/audit"
          data-draft-endpoint="/draft"
          data-chat-endpoint="/chat"
          data-archive-endpoint="/archive"
          data-auth="GATEWAY_TOKEN"
          data-runtime="LOCAL_SIMULADOR">
        </div>

        <script id="contract-api-v0" type="application/json">
{
  "name": "CONTRATO_API_V0",
  "payload": {
    "case_text": "string",
    "attachments": [{"name":"string","hash":"string","ref":"string"}],
    "case_meta": {"area":"string","tribunal":"string","fase":"string","urgencia":"string"},
    "objective": "audit|draft|chat|extract",
    "mode": "simulacao|analise|rascunho",
    "prefs": {"tom":"string","nivel":"string","formato":"html|text"}
  },
  "response": {
    "status": "OK|REJECT|NEED_MORE_INFO|ERROR",
    "cert": {"score":"number","selos":["string"],"integridade":"string"},
    "evidence": [{"id":"string","hash":"string","trecho":"string"}],
    "causal_chain": [{"event":"string","decision":"string","ts":"string"}],
    "result": {"audit":{}, "draft":{}, "chat":{}},
    "warnings": ["string"],
    "fail_closed_reason": "string"
  }
}
        </script>
      </section>

    </section>

    <!-- =========================
         COLUNA DIREITA: RESULTADOS
         ========================= -->
    <section class="col-resultado" aria-label="Resultados e documento">

      <div class="dashboard-lcu" aria-label="M√©tricas principais">
        <div class="metric-card" id="card-metrica-1">
          <small id="label-metrica-1">M√âTRICA DE VIABILIDADE</small>
          <strong id="val-expectativa">--</strong>
        </div>
        <div class="metric-card warning" id="card-metrica-2">
          <small id="label-metrica-2">MARGEM DE RISCO T√âCNICO</small>
          <strong id="val-erro">--</strong>
        </div>
      </div>

      <div id="output-canvas" class="canvas-documento" aria-label="Pr√©-visualiza√ß√£o do documento">
        <div class="placeholder-msg">
          <span class="icon" aria-hidden="true">üìÑ</span>
          <p id="txt-placeholder">Aguardando instru√ß√£o t√©cnica e acervo probat√≥rio para compilar o documento.</p>
        </div>
      </div>

      <details class="painel-rastreio" id="painel-rastreio">
        <summary>
          <span>Rastreabilidade & CERT (Governan√ßa)</span>
          <span class="hint">‚Äî selos, evid√™ncias, protocolo</span>
        </summary>

        <div class="rastreio-grid">
          <div class="rastreio-card">
            <h4>CERT</h4>
            <div id="cert-resumo" class="rastreio-body">
              <p class="muted">Aguardando resposta do motor para emitir CERT e selos.</p>
            </div>
          </div>

          <div class="rastreio-card">
            <h4>PROTOCOLO / LEDGER</h4>
            <div id="ledger-resumo" class="rastreio-body">
              <p class="muted">Nenhum protocolo registrado nesta sess√£o.</p>
            </div>
          </div>

          <div class="rastreio-card rastreio-card-wide">
            <h4>EVID√äNCIAS / BASE USADA</h4>
            <div id="evidencias-resumo" class="rastreio-body">
              <p class="muted">Sem evid√™ncias anexadas ao resultado (ainda).</p>
            </div>
          </div>
        </div>
      </details>

      <div class="acoes-finais" aria-label="A√ß√µes finais">
        <button id="btn-exportar" class="btn-secundario" type="button">üì• EXPORTAR DOCUMENTO (PDF LIMPO)</button>
        <button id="btn-salvar" class="btn-secundario" type="button">üíæ ARQUIVAR NO SISTEMA</button>
      </div>

    </section>

  </main>

  <!-- =========================
       PRINT (C05)
       ========================= -->
  <div id="secao-impressao-isolada" class="only-print"></div>

  <script src="script.js"></script>
</body>
  </html>
